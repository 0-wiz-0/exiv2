# set include path for FindXXX.cmake files
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/config/")

find_package(Threads REQUIRED)

IF( EXIV2_ENABLE_PNG )
    FIND_PACKAGE( ZLIB REQUIRED )
    INCLUDE_DIRECTORIES( ${ZLIB_INCLUDE_DIR} )
    SET (HAVE_LIBZ ${ZLIB_FOUND})
ENDIF( EXIV2_ENABLE_PNG )

IF( EXIV2_ENABLE_WEBREADY )
    SET( ENABLE_WEBREADY 1 )
    IF( EXIV2_ENABLE_CURL )
        FIND_PACKAGE( CURL REQUIRED)
        INCLUDE_DIRECTORIES( ${CURL_INCLUDE_DIR} )
        SET ( USE_CURL 1 )
    ENDIF()

    IF( EXIV2_ENABLE_SSH )
        FIND_PACKAGE( SSH REQUIRED)
        INCLUDE_DIRECTORIES( ${SSH_INCLUDE_DIR} )
        SET ( USE_SSH 1 )
    ENDIF( EXIV2_ENABLE_SSH )
ENDIF( EXIV2_ENABLE_WEBREADY )

IF (EXIV2_ENABLE_XMP)
    FIND_PACKAGE(EXPAT REQUIRED)
    INCLUDE_DIRECTORIES(${EXPAT_INCLUDE_DIR})
ENDIF (EXIV2_ENABLE_XMP)

IF( EXIV2_ENABLE_NLS )
    FIND_PACKAGE(Intl)
    if(Intl_FOUND)
        INCLUDE_DIRECTORIES(${Intl_INCLUDE_DIRS})
        SET(LIBINTL_LIBRARIES ${Intl_LIBRARIES})
    else()
        SET(LIBINTL_LIBRARIES)
    endif()
    IF( NOT LOCALEDIR )
        SET( LOCALEDIR "${CMAKE_INSTALL_LOCALEDIR}" )
        IF( WIN32 )
            STRING( REPLACE "/" "\\\\" LOCALEDIR ${LOCALEDIR} )
        ENDIF( WIN32 )
    ENDIF( NOT LOCALEDIR )
    ADD_DEFINITIONS( -DEXV_LOCALEDIR="${LOCALEDIR}" )
    SET( ENABLE_NLS 1 )
ENDIF( EXIV2_ENABLE_NLS )

FIND_PACKAGE(Iconv)
IF( ICONV_FOUND )
    SET( HAVE_ICONV 1 )
    INCLUDE_DIRECTORIES(${ICONV_INCLUDE_DIR})
    MESSAGE ( "-- ICONV_LIBRARIES : " ${ICONV_LIBRARIES} )
ENDIF( ICONV_FOUND )

IF( EXIV2_ENABLE_BUILD_PO )
    FIND_PACKAGE(MSGFMT)
    IF(MSGFMT_FOUND)
        MESSAGE(STATUS "Program msgfmt found (${MSGFMT_EXECUTABLE})")
        SET( EXIV2_BUILD_PO 1 )
    ENDIF(MSGFMT_FOUND)
ENDIF()
